import{u as L,r as n,j as t,a as e,H as U}from"./app.09040f3b.js";import H from"./Index.30fae513.js";import{d as K}from"./index.9d12938b.js";import{f as m}from"./extends.d5b9bf4e.js";import{i as N}from"./index.2c61398d.js";import{T as y}from"./index.d03b4bf5.js";import"./ApplicationLogo.9e12ab1f.js";import"./Dropdown.7a705ea4.js";import"./index.df37137f.js";import"./emotion-react.browser.esm.e366c3b8.js";function ae({auth:l,ruangan:p}){let d;l.user&&(d=l.user.email);const{data:i,setData:r,key:W,post:w,progress:o,processing:g,errors:$,reset:j}=L({nama_ruangan:p.nama_ruangan,nama_peminjam:"",email_peminjam:d,keterangan:"",tanggal_mulai_peminjaman:[],tanggal_selesai_peminjaman:[],waktu_mulai_peminjaman:[],waktu_selesai_peminjaman:[],pengajuan_pdf:[],preserveScroll:!0}),[v,_]=n.exports.useState(""),[k,D]=n.exports.useState(""),[z,S]=n.exports.useState("");console.log(k);function C(a){r("pengajuan_pdf",a.target.files[0]),iframe.src=URL.createObjectURL(a.target.files[0])}const[h,M]=n.exports.useState("00:00"),[f,P]=n.exports.useState("00:00"),[E,x]=n.exports.useState(!1),[T,b]=n.exports.useState(!1),[c,F]=n.exports.useState([{startDate:new Date,endDate:new Date,key:"selection"}]),[O,R]=n.exports.useState(!1),s=n.exports.useRef(null);n.exports.useEffect(()=>{document.addEventListener("click",q,!0),D(i.waktu_mulai_peminjaman),S(i.waktu_selesai_peminjaman)},[]);const q=a=>{s.current&&!s.current.contains(a.target)&&(x(!1),b(!1))},u=new Date;u.setDate(u.getDate()+20);function A(a){a.preventDefault(),console.log("pengajuan_pdf",i),w(route("pengajuan.store"),i,{forceFormData:!0,onSuccess:()=>j()})}return t(H,{auth:l,errors:l.errors,header:e("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Pengajuan"}),children:[e(U,{title:"Pengajuan"}),e("div",{className:"py-12",children:e("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e("div",{className:"py-12",children:e("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e("div",{className:"p-6 bg-white border-b border-gray-200",children:t("form",{onSubmit:A,encType:"multipart/form-data",action:route("pengajuan.store"),children:[e("input",{type:"hidden",name:"_token",value:"{{ csrf_token() }}"}),e("div",{className:"mb-4",children:t("label",{className:"text-xl text-gray-600",htmlFor:"ruangan",children:["Ruangan yang ingin dipinjam"," ",e("b",{children:p.nama_ruangan})]})}),t("div",{className:"mb-4 flex flex-wrap -mx-3",children:[t("div",{className:"w-full md:w-1/2 px-3",children:[t("label",{className:"text-xl text-gray-600",htmlFor:"nama_peminjam",children:["Nama",e("span",{className:"text-red-500",children:"*"})]}),e("br",{}),e("input",{type:"text",id:"nama_peminjam",name:"nama_peminjam",placeholder:"Masukkan Nama Anda",className:"border-2 border-gray-300 p-2 w-full rounded",onChange:a=>r("nama_peminjam",a.target.value),required:!0})]}),t("div",{className:"w-full md:w-1/2 px-3",children:[t("label",{className:"text-xl text-gray-600",htmlFor:"email_peminjam",children:["Email",e("span",{className:"text-red-500",children:"*"})]}),e("br",{}),e("input",{type:"text",id:"email_peminjam",name:"email_peminjam",defaultValue:d,placeholder:"Masukkan Email Anda",className:"border-2 border-gray-300 p-2 w-full rounded",onChange:a=>r("email_peminjam",a.target.value),required:!0})]})]}),t("div",{className:"mb-4",children:[t("label",{className:"text-xl text-gray-600",htmlFor:"keterangan",children:["Keterangan",e("span",{className:"text-red-500",children:"*"})]}),e("br",{}),e("input",{type:"text",id:"keterangan",name:"keterangan",placeholder:"Masukkan Tujuan Peminjaman Ruangan, dan Rekomendasi Jika Ada",className:"border-2 border-gray-300 p-2 w-full rounded",onChange:a=>r("keterangan",a.target.value),required:!0})]}),t("div",{className:"mb-4 flex flex-wrap -mx-3",children:[t("div",{className:"w-full md:w-1/2 px-3",children:[e("label",{className:"text-xl text-gray-600",children:"Tanggal Peminjaman"}),e("br",{}),e("input",{type:"button",value:`${m(c[0].startDate,"PPP",{locale:N})} sampai ${m(c[0].endDate,"PPP",{locale:N})}`,readOnly:!0,className:"border-2 border-gray-300 p-2 w-full rounded",onClick:()=>R(a=>!a)}),e("div",{ref:s,children:O&&e(K.DateRange,{className:"absolute border-2 border-blue-400 rounded",minDate:new Date,maxDate:u,ranges:c,months:2,direction:"horizontal",onChange:a=>{F([a.selection]),_(m(a.selection.endDate,"yyyy-MM-dd")),r("tanggal_mulai_peminjaman",m(a.selection.startDate,"yyyy-MM-dd"))}})})]}),t("div",{className:"w-full md:w-1/2 px-3",children:[e("label",{className:"text-xl text-gray-600",htmlFor:"waktu_peminjaman",children:"Waktu Peminjaman"}),t("div",{className:"flex flex-wrap ",children:[t("div",{className:"md:w-1/2 pr-3",children:[e("input",{type:"button",value:h,readOnly:!0,className:"border-2 border-gray-300 p-2 w-full rounded",onClick:()=>x(a=>!a)}),e("div",{ref:s,className:"absolute",children:E&&e(y,{time:h,onChange:a=>{M(a.formatted24),r("waktu_mulai_peminjaman",a.formatted24)},disabledTimeRange:{from:"20:00",to:"6:00"},forceCoarseMinutes:!0,hour24Mode:!0,coarseMinutes:15})})]}),t("div",{className:"md:w-1/2 pl-3",children:[e("input",{type:"button",readOnly:!0,value:f,className:"border-2 border-gray-300 p-2 w-full rounded",onClick:()=>b(a=>!a)}),e("div",{ref:s,className:"absolute",children:T&&e(y,{time:f,onChange:a=>{P(a.formatted24),r("waktu_selesai_peminjaman",a.formatted24)},disabledTimeRange:{from:"20:00",to:"7:00"},forceCoarseMinutes:!0,hour24Mode:!0,coarseMinutes:15})})]})]})]})]}),t("div",{children:[e("label",{className:"text-xl text-gray-600",children:"Surat Peminjaman"}),e("div",{className:"mb-4 mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:t("div",{className:"space-y-1 text-center",children:[e("div",{className:"text-sm text-gray-600",children:t("label",{htmlFor:"pengajuan_pdf",className:"cursor-pointer bg-indigo-600 rounded-md font-medium text-white hover:text-gray-200 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500",children:[e("span",{children:"Upload a file"}),e("input",{type:"file",id:"pengajuan_pdf",onChange:C,className:"sr-only"})]})}),e("p",{className:"text-xs",children:"PDF maksimal 2MB"}),e("iframe",{src:"",id:"iframe",alt:"pdf",className:"rounded-md",style:{width:"800px",height:"400px"}})]})})]}),t("div",{className:"flex p-1",children:[e("button",{type:"submit",disabled:g,className:"p-3 bg-blue-500 text-white hover:bg-blue-400 rounded",onClick:()=>{r("tanggal_selesai_peminjaman",v)},processing:g,children:"Submit"}),o&&t("progress",{value:o.percentage,max:"100",children:[o.percentage,"%"]})]})]})})})})})})})})]})}export{ae as default};

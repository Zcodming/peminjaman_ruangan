import{u as B,r as t,R as N,j as n,F as J,a as e,L as V}from"./app.09040f3b.js";import{F as y,f as H,a as Q}from"./index.61c39fa1.js";import{M as U}from"./ModalSurat.2b4e911b.js";import{m as X,l as Y}from"./react-select-animated.esm.2316f2cd.js";import{d as Z}from"./index.9d12938b.js";import{f as v}from"./extends.d5b9bf4e.js";import{S as j}from"./react-select.esm.0bfe7a6e.js";import{I as _}from"./InputError.8026f664.js";import"./index.df37137f.js";import"./toConsumableArray.0e2305b8.js";import"./inheritsLoose.06539100.js";import"./emotion-react.browser.esm.e366c3b8.js";function pe(i){const{data:s,setData:r,key:ee,post:k,errors:u,reset:S}=B({nama_ruangan:"Seminar 1",nama_peminjam:"",nim:"",keterangan:"",tanggal_peminjaman:[],waktu_peminjaman:"",sesi:"",preserveScroll:!0}),C=i.ruangan.map(a=>({value:a.nama_ruangan,label:a.nama_ruangan})),[R,F]=t.exports.useState([{startDate:new Date,endDate:new Date,key:"selection"}]),[D,o]=t.exports.useState(!1),m=t.exports.useRef(null);t.exports.useEffect(()=>{document.addEventListener("click",M,!0),r("tanggal_peminjaman",v(new Date,"yyyy-MM-dd"))},[]);const M=a=>{m.current&&!m.current.contains(a.target)&&o(!1)},A=X(),T=[{value:"Sesi 1",label:"Sesi 1 : 07:00 - 10:00"},{value:"Sesi 2",label:"Sesi 2 : 10:00 - 14:00"},{value:"Sesi 3",label:"Sesi 3 : 14:00 - 17:00"}];function P(a){a.preventDefault(),console.log("data",s),k("arsip/store",s,{forceFormData:!0,onSuccess:()=>S()})}const[E,p]=N.useState(!1),[I,L]=N.useState(null),[d,h]=t.exports.useState(!1),g=t.exports.useRef(null),x=t.exports.useRef(null),[O,q]=t.exports.useState("terbaru"),$={terbaru:(a,l)=>l.id-a.id,terlama:(a,l)=>a.id-l.id},[G,K]=t.exports.useState(""),[c,b]=t.exports.useState(i.data),W=a=>{const l=a.target.value;if(l!==""){const f=i.data.filter(z=>{var w;return(w=z.tanggal_mulai_peminjaman)==null?void 0:w.toLowerCase().startsWith(l.toLowerCase())});b(f),console.log(f)}else b(i.data);K(l)};return n(J,{children:[n("div",{className:"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded bg-white",children:[n("div",{className:"rounded-t mb-0 px-4 py-3 border-0",children:[e("div",{className:"flex flex-wrap",children:e("div",{className:"relative w-full px-4 max-w-full flex-grow flex-1",children:e("h3",{className:"font-semibold text-lg text-blueGray-700",children:"Arsip Peminjaman Ruangan"})})}),n("div",{className:"flex flex-wrap",children:[e("div",{className:"relative w-full px-4 max-w-full flex-grow flex-1",ref:g,children:d?e("button",{className:"bg-green-400 text-white hover:bg-green-500 object-center px-4 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear",onClick:()=>h(a=>!1),children:e(y,{icon:H})}):e("button",{className:"bg-green-400 text-white hover:bg-green-500 object-center px-4 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear",onClick:()=>h(a=>!a),children:"Tambah Data"})}),d?e("input",{hidden:!0}):n("div",{children:[e(Y.DownloadTableExcel,{filename:"Arsip Peminjaman Ruang Seminar",sheet:"arsip",currentTableRef:x.current,children:e("button",{type:"button",className:"bg-green-400 text-white hover:bg-green-500 object-center px-4 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear",children:"Export ke Excel"})}),e("input",{type:"text",placeholder:"Filter Tanggal",onFocus:a=>a.target.type="date",onBlur:a=>a.target.type="text",style:{width:"200px"},title:"Filter Tanggal",value:G,onChange:a=>W(a),className:"input rounded mr-2"}),n("select",{defaultValue:"terbaru",className:"rounded",onChange:a=>q(a.target.value),children:[e("option",{value:"terbaru",children:"sortir - terbaru"}),e("option",{value:"terlama",children:"sortir - terlama"})]})]})]})]}),e("div",{className:"block w-full overflow-x-auto",ref:g,children:d?e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e("div",{className:"p-6 bg-white border-b border-gray-200",children:n("form",{onSubmit:P,encType:"multipart/form-data",action:route("pinjam.store"),children:[e("input",{type:"hidden",name:"_token",value:"{{ csrf_token() }}"}),n("div",{className:"mb-4",children:[e("label",{className:"text-xl text-gray-600",htmlFor:"ruangan",children:"Ruangan yang ingin dipinjam"}),e(j,{id:"nama_ruangan",name:"nama_ruangan",className:"basic-single",classNamePrefix:"select",components:A,options:C,onChange:a=>r("nama_ruangan",a.value)})]}),n("div",{className:"mb-4 flex flex-wrap -mx-3",children:[n("div",{className:"w-full md:w-1/2 px-3",children:[n("label",{className:"text-xl text-gray-600",htmlFor:"nama_peminjam",children:["Nama",e("span",{className:"text-red-500",children:"*"})]}),e("br",{}),e("input",{type:"text",id:"nama_peminjam",name:"nama_peminjam",placeholder:"Masukkan Nama Anda",className:"border-2 border-gray-300 p-2 w-full rounded",onChange:a=>r("nama_peminjam",a.target.value),required:!0}),e(_,{message:u.nama_peminjam,className:"mt-2"})]}),n("div",{className:"w-full md:w-1/2 px-3",children:[n("label",{className:"text-xl text-gray-600",htmlFor:"nim",children:["NIM",e("span",{className:"text-red-500",children:"*"})]}),e("br",{}),e("input",{type:"text",id:"nim",name:"nim",placeholder:"Masukkan NIM Anda",className:"border-2 border-gray-300 p-2 w-full rounded",onChange:a=>r("nim",a.target.value),required:!0})]})]}),n("div",{className:"mb-4",children:[n("label",{className:"text-xl text-gray-600",htmlFor:"keterangan",children:["Keterangan",e("span",{className:"text-red-500",children:"*"})]}),e("br",{}),e("input",{type:"text",id:"keterangan",name:"keterangan",placeholder:"Masukkan Tujuan Peminjaman Ruangan, dan Rekomendasi Jika Ada",className:"border-2 border-gray-300 p-2 w-full rounded",onChange:a=>r("keterangan",a.target.value),required:!0})]}),n("div",{className:"mb-4 flex flex-wrap -mx-3",children:[n("div",{className:"w-full md:w-1/2 px-3 relative",children:[e("label",{className:"text-xl text-gray-600",children:"Tanggal Peminjaman"}),e("br",{}),e("input",{value:s.tanggal_peminjaman,type:"button",readOnly:!0,className:"border-2 border-gray-300 p-2 w-full rounded",onClick:()=>o(a=>!a)}),e("div",{ref:m,children:D&&e(Z.DateRange,{className:"relative border-2 border-blue-400 rounded",minDate:new Date,ranges:R,months:1,direction:"horizontal",onChange:a=>{F([a.selection]),r("tanggal_peminjaman",v(a.selection.startDate,"yyyy-MM-dd")),o(!1)}})})]}),n("div",{className:"relative w-full md:w-1/2 px-3",children:[e("label",{className:"text-xl text-gray-600",htmlFor:"waktu_peminjaman",children:"Waktu Peminjaman"}),e("div",{children:e(j,{className:"relative basic-single",classNamePrefix:"select",name:"waktu",options:T,onChange:a=>{r("waktu_peminjaman",a.value)},required:!0})}),e(_,{message:u.sesi,className:"mt-2"})]})]}),e("div",{className:"flex p-1",children:e("button",{type:"submit",className:"p-3 bg-blue-500 text-white hover:bg-blue-400 rounded",onClick:a=>r("sesi",`${s.nama_ruangan},${s.tanggal_peminjaman},${s.waktu_peminjaman}`),children:"Submit"})})]})})}):n("table",{className:"min-w-max w-full table-fixed",ref:x,children:[e("thead",{children:n("tr",{className:"bg-gray-200 text-gray-600 uppercase text-sm leading-normal",children:[e("th",{className:"py-3 px-5 text-center w-20",children:"No"}),e("th",{className:"py-3 px-5 text-center mx-auto",children:"Ruangan"}),e("th",{className:"py-3 px-5 text-center max-w-md mx-auto",children:"Nama Peminjam"}),e("th",{className:"py-3 px-5 text-center mx-auto ",children:"Keterangan"}),e("th",{className:"py-3 px-5 text-center mx-auto ",children:"Tanggal Peminjaman"}),e("th",{className:"py-3 px-5 text-center mx-auto ",children:"Actions"})]})}),e("tbody",{className:"text-gray-600 text-sm font-light",children:c&&c.length>0?c.sort($[O]).map(a=>n("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:[e("td",{className:"py-3 px-5 whitespace-nowrap",children:e("span",{className:"ml-3 font-bold text-blueGray-600 object-center",children:a.id},a.id)}),e("td",{className:"py-3 px-5 text-center ",children:e("span",{children:a.nama_ruangan})},a.nama_ruangan),e("td",{className:"py-3 px-5 text-center ",children:e("span",{children:a.nama_peminjam})},a.nama_peminjam),e("td",{className:"py-3 px-5 w-30 objects-center",children:e("span",{children:e("p",{children:a.keterangan})})},a.keterangan),e("td",{className:"py-3 px-5 object-center",children:e("span",{children:n("p",{children:[a.tanggal_mulai_peminjaman," ","hingga"," ",a.tanggal_selesai_peminjaman]})})},a.tanggal_mulai_peminjaman),n("td",{className:"py-3 px-5 text-center flex item-center justify-center",children:[e("button",{type:"button",onClick:()=>{p(a.surat_pdf),L(a.id)},className:"bg-yellow-300 text-white hover:bg-yellow-400 object-center px-4 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear",children:e(y,{icon:Q})}),e(U,{onClose:()=>p(!1),showModal:E,showId:I,title:"Surat Peminjaman"})]},a.surat_pdf)]})):e("h1",{children:"No results found!"})})]})})]}),e("div",{className:"mt-4",children:i.data.map(a=>e(V,{href:a.url,className:"px-1",children:a.label}))})]})}export{pe as default};

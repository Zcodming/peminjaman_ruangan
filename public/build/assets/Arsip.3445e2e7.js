import{u as ie,r as n,R as g,j as t,F as oe,a as e,L as de}from"./app.c5fb3a84.js";import{F as D,f as me,a as ce}from"./index.c27b8759.js";import{M as ue}from"./ModalSurat.6090dd91.js";import{m as pe,l as he}from"./react-select-animated.esm.78d9ad8d.js";import{d as ge}from"./index.ef26bd93.js";import{f as d}from"./extends.d5b9bf4e.js";import{i as R}from"./index.2c61398d.js";import{T as M}from"./index.2be040ff.js";import{S as xe}from"./react-select.esm.2a530f57.js";import"./index.df37137f.js";import"./toConsumableArray.0e2305b8.js";import"./inheritsLoose.06539100.js";import"./emotion-react.browser.esm.4ac43cc2.js";function Ee(s){const{data:o,setData:r,key:fe,post:T,progress:m,processing:x,errors:be,reset:F}=ie({nama_ruangan:[],nama_peminjam:"",keterangan:"",tanggal_mulai_peminjaman:[],tanggal_selesai_peminjaman:[],waktu_mulai_peminjaman:[],waktu_selesai_peminjaman:[],durasi_pinjam:"",surat_pdf:[],preserveScroll:!0});function P(a){r("surat_pdf",a.target.files[0]),iframe.src=URL.createObjectURL(a.target.files[0])}const E=s.ruangan.map(a=>({value:a.nama_ruangan,label:a.nama_ruangan})),[we,A]=n.exports.useState(""),[Ne,O]=n.exports.useState(""),[f,L]=n.exports.useState("00:00"),[b,q]=n.exports.useState("00:00"),[I,w]=n.exports.useState(!1),[K,N]=n.exports.useState(!1),[c,U]=n.exports.useState([{startDate:new Date,endDate:new Date,key:"selection"}]),[W,B]=n.exports.useState(!1),i=n.exports.useRef(null);n.exports.useEffect(()=>{document.addEventListener("click",G,!0),A(o.waktu_mulai_peminjaman),O(o.waktu_selesai_peminjaman)},[]);const G=a=>{i.current&&!i.current.contains(a.target)&&(w(!1),N(!1))},$=pe(),[z,J]=n.exports.useState(""),u=new Date;u.setDate(u.getDate()+20);function V(a){a.preventDefault(),console.log("data",o),T("arsip/add",o,{forceFormData:!0,onSuccess:()=>F()})}const[H,y]=g.useState(!1),[Q,X]=g.useState(null),[Y,Z]=g.useState(""),[p,v]=n.exports.useState(!1),_=n.exports.useRef(null),j=n.exports.useRef(null),[ee,ae]=n.exports.useState("terbaru"),te={terbaru:(a,l)=>l.id-a.id,terlama:(a,l)=>a.id-l.id},[ne,re]=n.exports.useState(""),[h,k]=n.exports.useState(s.data),le=a=>{const l=a.target.value;if(l!==""){const S=s.data.filter(se=>{var C;return(C=se.tanggal_mulai_peminjaman)==null?void 0:C.toLowerCase().startsWith(l.toLowerCase())});k(S),console.log(S)}else k(s.data);re(l)};return t(oe,{children:[t("div",{className:"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded bg-white",children:[t("div",{className:"rounded-t mb-0 px-4 py-3 border-0",children:[e("div",{className:"flex flex-wrap",children:e("div",{className:"relative w-full px-4 max-w-full flex-grow flex-1",children:e("h3",{className:"font-semibold text-lg text-blueGray-700",children:"Arsip Peminjaman Ruangan"})})}),t("div",{className:"flex flex-wrap",children:[e("div",{className:"relative w-full px-4 max-w-full flex-grow flex-1",ref:_,children:p?e("button",{className:"bg-green-400 text-white hover:bg-green-500 object-center px-4 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear",onClick:()=>v(a=>!1),children:e(D,{icon:me})}):e("button",{className:"bg-green-400 text-white hover:bg-green-500 object-center px-4 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear",onClick:()=>v(a=>!a),children:"Tambah Data"})}),p?e("input",{hidden:!0}):t("div",{children:[e(he.DownloadTableExcel,{filename:"Arsip Peminjaman Ruangan",sheet:"arsip",currentTableRef:j.current,children:e("button",{type:"button",className:"bg-green-400 text-white hover:bg-green-500 object-center px-4 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear",children:"Export ke Excel"})}),e("input",{type:"text",placeholder:"Filter Tanggal",onFocus:a=>a.target.type="date",onBlur:a=>a.target.type="text",style:{width:"200px"},title:"Filter Tanggal",value:ne,onChange:a=>le(a),className:"input rounded mr-2"}),t("select",{defaultValue:"terbaru",className:"rounded",onChange:a=>ae(a.target.value),children:[e("option",{value:"terbaru",children:"sortir - terbaru"}),e("option",{value:"terlama",children:"sortir - terlama"})]})]})]})]}),e("div",{className:"block w-full overflow-x-auto",ref:_,children:p?e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e("div",{className:"p-6 bg-white border-b border-gray-200",children:t("form",{onSubmit:V,encType:"multipart/form-data",action:route("pengajuan.store"),children:[e("input",{type:"hidden",name:"_token",value:"{{ csrf_token() }}"}),t("div",{className:"mb-4",children:[e("label",{className:"text-xl text-gray-600",htmlFor:"ruangan",children:"Ruangan yang ingin dipinjam"}),e(xe,{id:"nama_ruangan",name:"nama_ruangan",className:"basic-single",classNamePrefix:"select",components:$,options:E,onChange:a=>r("nama_ruangan",a)})]}),t("div",{className:"mb-4 flex flex-wrap -mx-3",children:[t("div",{className:"w-full md:w-1/2 px-3",children:[t("label",{className:"text-xl text-gray-600",htmlFor:"nama_peminjam",children:["Nama",e("span",{className:"text-red-500",children:"*"})]}),e("br",{}),e("input",{type:"text",id:"nama_peminjam",name:"nama_peminjam",placeholder:"Masukkan Nama Anda",className:"border-2 border-gray-300 p-2 w-full rounded",onChange:a=>r("nama_peminjam",a.target.value),required:!0})]}),t("div",{className:"w-full md:w-1/2 px-3",children:[t("label",{className:"text-xl text-gray-600",htmlFor:"email_peminjam",children:["Email",e("span",{className:"text-red-500",children:"*"})]}),e("br",{}),e("input",{type:"text",id:"email_peminjam",name:"email_peminjam",placeholder:"Masukkan Email Anda",className:"border-2 border-gray-300 p-2 w-full rounded",onChange:a=>r("email_peminjam",a.target.value),required:!0})]})]}),t("div",{className:"mb-4",children:[t("label",{className:"text-xl text-gray-600",htmlFor:"keterangan",children:["Keterangan",e("span",{className:"text-red-500",children:"*"})]}),e("br",{}),e("input",{type:"text",id:"keterangan",name:"keterangan",placeholder:"Masukkan Tujuan Peminjaman Ruangan, dan Rekomendasi Jika Ada",className:"border-2 border-gray-300 p-2 w-full rounded",onChange:a=>r("keterangan",a.target.value),required:!0})]}),t("div",{className:"mb-4 flex flex-wrap -mx-3",children:[t("div",{className:"w-full md:w-1/2 px-3",children:[e("label",{className:"text-xl text-gray-600",children:"Tanggal Peminjaman"}),e("br",{}),e("input",{type:"button",value:`${d(c[0].startDate,"PPP",{locale:R})} sampai ${d(c[0].endDate,"PPP",{locale:R})}`,readOnly:!0,className:"border-2 border-gray-300 p-2 w-full rounded",onClick:()=>B(a=>!a)}),e("div",{ref:i,children:W&&e(ge.DateRange,{className:"absolute border-2 border-blue-400 rounded",minDate:new Date,maxDate:u,ranges:c,months:2,direction:"horizontal",onChange:a=>{U([a.selection]),J(d(a.selection.endDate,"yyyy-MM-dd")),r("tanggal_mulai_peminjaman",d(a.selection.startDate,"yyyy-MM-dd"))}})})]}),t("div",{className:"w-full md:w-1/2 px-3",children:[e("label",{className:"text-xl text-gray-600",htmlFor:"waktu_peminjaman",children:"Waktu Peminjaman"}),t("div",{className:"flex flex-wrap ",children:[t("div",{className:"md:w-1/2 pr-3",children:[e("input",{type:"button",value:f,readOnly:!0,className:"border-2 border-gray-300 p-2 w-full rounded",onClick:()=>w(a=>!a)}),e("div",{ref:i,className:"absolute",children:I&&e(M,{time:f,onChange:a=>{L(a.formatted24),r("waktu_mulai_peminjaman",a.formatted24)},disabledTimeRange:{from:"20:00",to:"6:00"},forceCoarseMinutes:!0,hour24Mode:!0,coarseMinutes:15})})]}),t("div",{className:"md:w-1/2 pl-3",children:[e("input",{type:"button",readOnly:!0,value:b,className:"border-2 border-gray-300 p-2 w-full rounded",onClick:()=>N(a=>!a)}),e("div",{ref:i,className:"absolute",children:K&&e(M,{time:b,onChange:a=>{q(a.formatted24),r("waktu_selesai_peminjaman",a.formatted24)},disabledTimeRange:{from:"20:00",to:"7:00"},forceCoarseMinutes:!0,hour24Mode:!0,coarseMinutes:15})})]})]})]})]}),t("div",{children:[e("label",{className:"text-xl text-gray-600",children:"Surat Peminjaman"}),e("div",{className:"mb-4 mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:t("div",{className:"space-y-1 text-center",children:[e("div",{className:"text-sm text-gray-600",children:t("label",{htmlFor:"pengajuan_pdf",className:"cursor-pointer bg-indigo-600 rounded-md font-medium text-white hover:text-gray-200 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500",children:[e("span",{children:"Upload a file"}),e("input",{type:"file",id:"pengajuan_pdf",onChange:P,className:"sr-only"})]})}),e("p",{className:"text-xs",children:"PDF maksimal 2MB"}),e("iframe",{src:"",id:"iframe",alt:"pdf",className:"rounded-md",style:{width:"800px",height:"400px"}})]})})]}),t("div",{className:"flex p-1",children:[e("button",{type:"submit",disabled:x,className:"p-3 bg-blue-500 text-white hover:bg-blue-400 rounded",onClick:()=>{r("tanggal_selesai_peminjaman",z)},processing:x,children:"Submit"}),m&&t("progress",{value:m.percentage,max:"100",children:[m.percentage,"%"]})]})]})})}):t("table",{className:"min-w-max w-full table-fixed",ref:j,children:[e("thead",{children:t("tr",{className:"bg-gray-200 text-gray-600 uppercase text-sm leading-normal",children:[e("th",{className:"py-3 px-5 text-center w-20",children:"No"}),e("th",{className:"py-3 px-5 text-center mx-auto",children:"Ruangan"}),e("th",{className:"py-3 px-5 text-center max-w-md mx-auto",children:"Nama Peminjam"}),e("th",{className:"py-3 px-5 text-center mx-auto ",children:"Keterangan"}),e("th",{className:"py-3 px-5 text-center mx-auto ",children:"Tanggal Peminjaman"}),e("th",{className:"py-3 px-5 text-center mx-auto ",children:"Actions"})]})}),e("tbody",{className:"text-gray-600 text-sm font-light",children:h&&h.length>0?h.sort(te[ee]).map(a=>t("tr",{className:"list border-b border-gray-200 hover:bg-gray-100",children:[e("td",{className:"list-id py-3 px-5 whitespace-nowrap",children:e("span",{className:"ml-3 font-bold text-blueGray-600 object-center",children:a.id})}),e("td",{className:"list-nama_ruangan py-3 px-5 text-center ",children:e("span",{children:a.nama_ruangan})}),e("td",{className:"list-name py-3 px-5 text-center ",children:e("span",{children:a.nama_peminjam})}),e("td",{className:"py-3 px-5 w-30 objects-center",children:e("span",{children:e("p",{children:a.keterangan})})}),e("td",{className:"py-3 px-5 object-center ",children:e("span",{children:t("p",{children:[a.tanggal_mulai_peminjaman," ","hingga"," ",a.tanggal_selesai_peminjaman]})})}),t("td",{className:"py-3 px-5 text-center flex item-center justify-center",children:[e("button",{type:"button",onClick:()=>{y(!0),Z(a.surat_pdf),X(a.id)},className:"bg-yellow-300 text-white hover:bg-yellow-400 object-center px-4 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear",children:e(D,{icon:ce})}),e(ue,{onClose:()=>y(!1),showModal:H,showSurat:Y,showId:Q,title:"Surat Peminjaman"})]},a.surat_pdf)]},a.id)):e("h1",{children:"No results found!"})})]})})]}),e("div",{className:"mt-4",children:s.data.map(a=>e(de,{href:a.url,className:"px-1",children:a.label}))})]})}export{Ee as default};
